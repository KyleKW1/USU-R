<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Retreat Assessment Form</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        .top-nav {
            text-align: right;
            padding: 10px;
        }
        .top-nav a {
            color: white;
            text-decoration: none;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 600;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            padding: 40px;
        }
        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
            font-style: italic;
        }
        .section {
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 2px solid #f0f0f0;
        }
        .section:last-child {
            border-bottom: none;
        }
        h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 20px;
            display: flex;
            align-items: center;
        }
        h2::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 24px;
            background: #667eea;
            margin-right: 12px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            color: #444;
            font-weight: 500;
            font-size: 14px;
        }
        input[type="text"], input[type="email"], textarea, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            font-family: inherit;
            transition: border-color 0.3s;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        select.error {
            border-color: #f44336 !important;
            background-color: #ffebee;
        }
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        .rating-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .rating-option, .checkbox-option {
            display: flex;
            align-items: center;
        }
        .rating-option input, .checkbox-option input {
            margin-right: 8px;
        }
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 40px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: transform 0.2s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .note {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #667eea;
            margin-bottom: 30px;
            font-size: 13px;
            color: #555;
        }
        .warning {
            background: #fff3e0;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #ff9800;
            margin-bottom: 20px;
            font-size: 13px;
            color: #e65100;
            display: none;
        }
        .success-message {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
            margin-bottom: 20px;
            font-weight: 500;
            display: none;
        }
        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #f44336;
            margin-bottom: 20px;
            font-weight: 500;
            display: none;
        }
    </style>
</head>
<body>
    <div class="top-nav">
        <a href="retreat_assessment_form.html">üìä View Analytics Dashboard</a>
    </div>
    
    <div class="container">
        <div class="success-message" id="successMessage">
            ‚úÖ <strong>Thank you!</strong> Your response has been successfully submitted.
        </div>

        <div class="error-message" id="errorMessage">
            ‚ùå <strong>Error:</strong> <span id="errorText"></span>
        </div>

        <h1>UTech Students' Union Council Pre-Retreat Assessment Form</h1>
        <p class="subtitle">Your responses will help us create a more meaningful and productive retreat experience</p>
        
        <div class="note">
            <strong>Confidential:</strong> All responses are anonymous and will be used solely for planning purposes to better support the Council and student body.
        </div>
        
        <form id="assessmentForm">
            <!-- Personal Information -->
            <div class="section">
                <h2>Council Member Information</h2>
                <div class="form-group">
                    <label for="name">Name (Optional):</label>
                    <input type="text" id="name" name="name">
                </div>
                <div class="form-group">
                    <label for="email">Email (Optional):</label>
                    <input type="email" id="email" name="email">
                </div>
                
                <div class="warning" id="boardWarning">
                    ‚ö†Ô∏è <strong>Please select your board first!</strong> This is a required field.
                </div>
                
                <div class="form-group">
                    <label for="councilBoard">Which board do you serve on? * <span style="color: #f44336; font-weight: bold;">(REQUIRED)</span></label>
                    <select id="councilBoard" name="councilBoard" required>
                        <option value="">‚¨áÔ∏è SELECT YOUR BOARD HERE ‚¨áÔ∏è</option>
                        <option value="Board of Executives">Board of Executives</option>
                        <option value="Board of Representatives">Board of Representatives</option>
                        <option value="Board of Advisors">Board of Advisors</option>
                        <option value="Board of Directors">Board of Directors</option>
                    </select>
                </div>
                    
                <div class="form-group">
                    <label for="councilPosition">Council Position (Optional):</label>
                    <select id="councilPosition" name="councilPosition">
                        <option value="">Select your position...</option>
                        <optgroup label="Board of Executives">
                            <option value="president">President</option>
                            <option value="1st-vp">1st Vice President Academic Affairs, Clubs & Societies</option>
                            <option value="vp-finance">Vice President, Finance</option>
                            <option value="vp-student-services">Vice President, Student Services</option>
                            <option value="vp-pr">Vice President, Public Relations</option>
                            <option value="exec-secretary">Executive Secretary</option>
                        </optgroup>
                        <optgroup label="Board of Representatives">
                            <option value="sci-sport-rep">Faculty of Science and Sport Representative</option>
                            <option value="health-rep">College of Health Sciences Representative</option>
                            <option value="edu-liberal-rep">Faculty of Education and Liberal Studies Representative</option>
                            <option value="engineering-rep">School of Engineering Representative</option>
                            <option value="scit-rep">School of Computing and IT Representative</option>
                            <option value="soba-rep">School of Business Administration/JDSEEL Representative</option>
                            <option value="blm-rep">School of Building and Land Management Representative</option>
                            <option value="arch-rep">Caribbean School of Architecture Representative</option>
                            <option value="law-rep">Faculty of Law Representative</option>
                            <option value="western-rep">Western Campus Representative</option>
                            <option value="resident-rep">Resident Students' Representative</option>
                            <option value="grad-rep">Graduate Students' Representative</option>
                            <option value="intl-rep">International Students' Representative</option>
                            <option value="med-rep">Joint Colleges of Medicine, Oral Health, and Veterinary Sciences Representative</option>
                        </optgroup>
                        <optgroup label="Board of Directors">
                            <option value="dir-elections">Director of Elections and Regulatory Affairs</option>
                            <option value="dir-community">Director of Community Service</option>
                            <option value="dir-health-safety">Director of Health and Safety</option>
                            <option value="dir-entertainment">Director of Entertainment and Cultural Activities</option>
                            <option value="dir-sport">Director of Sport</option>
                            <option value="dir-spiritual">Director of Spiritual Development</option>
                            <option value="dir-special">Director of Special Projects</option>
                            <option value="editor">Editor in Chief</option>
                        </optgroup>
                        <optgroup label="Board of Advisors">
                            <option value="advisor-pres">Advisor to the President</option>
                            <option value="advisor-1vp">Advisor to the 1st Vice President</option>
                            <option value="exec-assistant">Executive Assistant</option>
                            <option value="advisor-vpss">Special Advisor to VP Student Services</option>
                            <option value="pres-assistant">President's Assistant</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tenure">Time on Students' Union Council: *</label>
                    <select id="tenure" name="tenure" required>
                        <option value="">Select...</option>
                        <option value="first-year">First year on Council</option>
                        <option value="second-year">Second year on Council</option>
                        <option value="third-year">Third year or more on Council</option>
                    </select>
                </div>
            </div>
            
            <!-- Job Satisfaction -->
            <div class="section">
                <h2>Council Experience & Effectiveness</h2>
                <div class="form-group">
                    <label>Overall satisfaction with your Council experience: *</label>
                    <div class="rating-group">
                        <label class="rating-option">
                            <input type="radio" name="satisfaction" value="1" required>
                            Very Dissatisfied
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="satisfaction" value="2">
                            Dissatisfied
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="satisfaction" value="3">
                            Neutral
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="satisfaction" value="4">
                            Satisfied
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="satisfaction" value="5">
                            Very Satisfied
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="roleDislikes">What aspects of your Council role do you find most challenging or frustrating? *</label>
                    <textarea id="roleDislikes" name="roleDislikes" placeholder="Consider: portfolio responsibilities, time management, resource constraints, communication barriers, etc." required></textarea>
                </div>
                <div class="form-group">
                    <label for="executiveConcerns">Are there concerns about the Executive Board or Council leadership you'd like to address?</label>
                    <textarea id="executiveConcerns" name="executiveConcerns" placeholder="This may include decision-making processes, transparency, communication, or guidance received"></textarea>
                </div>
                <div class="form-group">
                    <label for="councilDynamics">Describe any challenges in Council dynamics or relationships with fellow Council members:</label>
                    <textarea id="councilDynamics" name="councilDynamics" placeholder="Consider: Board interactions, collaboration between portfolios, conflicts, communication issues, etc."></textarea>
                </div>
                <div class="form-group">
                    <label for="studentBodyChallenges">What challenges do you face in representing or serving the student body?</label>
                    <textarea id="studentBodyChallenges" name="studentBodyChallenges" placeholder="Consider: student engagement, feedback mechanisms, addressing student concerns, etc."></textarea>
                </div>
            </div>
            
            <!-- Personal Development -->
            <div class="section">
                <h2>Leadership Development & Portfolio Performance</h2>
                <div class="form-group">
                    <label for="achievements">What are your top 3 achievements in your Council role this year? *</label>
                    <textarea id="achievements" name="achievements" placeholder="Consider: programs implemented, initiatives led, student impact, collaboration successes, etc." required></textarea>
                </div>
                <div class="form-group">
                    <label for="weaknesses">What leadership or portfolio-specific areas do you feel you need to improve or develop? *</label>
                    <textarea id="weaknesses" name="weaknesses" placeholder="Be honest - this helps us plan targeted training and support" required></textarea>
                </div>
                <div class="form-group">
                    <label for="skills">What skills, training, or resources would help you serve more effectively in your portfolio?</label>
                    <textarea id="skills" name="skills" placeholder="Examples: public speaking, conflict resolution, project management, budgeting, event planning, social media, etc."></textarea>
                </div>
                <div class="form-group">
                    <label for="constitutionKnowledge">How well do you understand the Students' Union Constitution and your role's responsibilities?</label>
                    <select id="constitutionKnowledge" name="constitutionKnowledge">
                        <option value="">Select...</option>
                        <option value="very-limited">Very limited understanding</option>
                        <option value="basic">Basic understanding</option>
                        <option value="moderate">Moderate understanding</option>
                        <option value="strong">Strong understanding</option>
                        <option value="expert">Expert understanding</option>
                    </select>
                </div>
            </div>
            
            <!-- Support and Resources -->
            <div class="section">
                <h2>Support, Resources & Council Operations</h2>
                <div class="form-group">
                    <label>Select areas where you lack adequate support:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option">
                            <input type="checkbox" name="lackSupport" value="executive">
                            Executive Board guidance and mentorship
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="lackSupport" value="peers">
                            Fellow Council members collaboration
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="lackSupport" value="university">
                            University Administration support
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="lackSupport" value="financial">
                            Financial resources for portfolio activities
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="lackSupport" value="office">
                            Students' Union Office resources and facilities
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="lackSupport" value="training">
                            Training and professional development
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="lackSupport" value="time">
                            Time management and workload balance
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="lackSupport" value="communication">
                            Communication channels and information flow
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="supportDetails">Please elaborate on any areas where you lack support and suggest improvements:</label>
                    <textarea id="supportDetails" name="supportDetails" placeholder="Be specific about what would help you succeed in your role"></textarea>
                </div>
                <div class="form-group">
                    <label for="codeOfConductConcerns">Have you experienced challenges related to the Council's Code of Conduct or accountability?</label>
                    <textarea id="codeOfConductConcerns" name="codeOfConductConcerns" placeholder="This includes attendance expectations, report submissions, Council event participation, etc."></textarea>
                </div>
            </div>
            
            <!-- Financial Concerns -->
            <div class="section">
                <h2>Financial & Academic Well-being</h2>
                <div class="form-group">
                    <label>Are you facing financial challenges? *</label>
                    <div class="rating-group">
                        <label class="rating-option">
                            <input type="radio" name="financialChallenges" value="yes" required>
                            Yes
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="financialChallenges" value="no">
                            No
                        </label>
                    </div>
                </div>
                <div class="form-group" id="financialDetailsSection" style="display: none;">
                    <label>These financial challenges affect: (Select all that apply)</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option">
                            <input type="checkbox" name="financialImpact" value="personal">
                            My personal life and well-being
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="financialImpact" value="council">
                            My ability to fulfill my Council role
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="financialImpact" value="academic">
                            My ability to maintain my academics
                        </label>
                    </div>
                </div>
                <div class="form-group" id="financialStrugglesSection" style="display: none;">
                    <label for="financialStruggles">Please elaborate on your financial challenges (Optional but helpful):</label>
                    <textarea id="financialStruggles" name="financialStruggles" placeholder="Examples: transportation costs to Council events, inability to afford meals during long Council days, need for additional work that conflicts with Council duties, tuition challenges, etc."></textarea>
                </div>
                <div class="form-group">
                    <label>Are you experiencing academic difficulties? *</label>
                    <div class="rating-group">
                        <label class="rating-option">
                            <input type="radio" name="academicChallenges" value="yes" required>
                            Yes
                        </label>
                        <label class="rating-option">
                            <input type="radio" name="academicChallenges" value="no">
                            No
                        </label>
                    </div>
                </div>
                <div class="form-group" id="academicDetailsSection" style="display: none;">
                    <label>These academic difficulties affect: (Select all that apply)</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option">
                            <input type="checkbox" name="academicImpact" value="personal">
                            My personal stress and well-being
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="academicImpact" value="council">
                            My ability to fulfill my Council role
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="academicImpact" value="grades">
                            My GPA and academic standing
                        </label>
                    </div>
                </div>
                <div class="form-group" id="academicStrugglesSection" style="display: none;">
                    <label for="academicStruggles">Please elaborate on your academic challenges (Optional but helpful):</label>
                    <textarea id="academicStruggles" name="academicStruggles" placeholder="Examples: difficulty balancing coursework with Council duties, risk of academic probation, challenging courses this semester, missing classes for Council events, etc."></textarea>
                </div>
                <div class="form-group">
                    <label>Would any of these benefit you?</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option">
                            <input type="checkbox" name="supportNeeds" value="time-management">
                            Time management and study skills workshop
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="supportNeeds" value="financial">
                            Financial literacy and budgeting resources
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="supportNeeds" value="mentorship">
                            Academic or leadership mentorship
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="supportNeeds" value="counseling">
                            Access to counseling or wellness services
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="supportNeeds" value="flexibility">
                            More flexible Council meeting schedules
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- Retreat Expectations -->
            <div class="section">
                <h2>Retreat Expectations & Suggestions</h2>
                <div class="form-group">
                    <label for="retreatGoals">What do you hope to gain from this mandatory Council retreat? *</label>
                    <textarea id="retreatGoals" name="retreatGoals" placeholder="Reference: Constitution Article X, Section 16 - this retreat is designed for planning, leadership training, and team building" required></textarea>
                </div>
                <div class="form-group">
                    <label for="trainingTopics">What specific training topics would benefit you and the Council?</label>
                    <textarea id="trainingTopics" name="trainingTopics" placeholder="Examples: parliamentary procedure, financial management, event planning, conflict resolution, public speaking, social media strategy, understanding the Constitution, etc."></textarea>
                </div>
                <div class="form-group">
                    <label>Which areas should the retreat prioritize? (Select up to 3)</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option">
                            <input type="checkbox" name="retreatPriorities" value="team-building">
                            Team building and Council unity
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="retreatPriorities" value="strategic-planning">
                            Strategic planning for the year
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="retreatPriorities" value="skills-training">
                            Skills training and workshops
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="retreatPriorities" value="conflict-resolution">
                            Addressing conflicts and improving communication
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="retreatPriorities" value="constitution-review">
                            Constitution review and governance
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="retreatPriorities" value="student-engagement">
                            Improving student engagement strategies
                        </label>
                        <label class="checkbox-option">
                            <input type="checkbox" name="retreatPriorities" value="wellness">
                            Council member wellness and self-care
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="previousRetreats">If you attended previous retreats, what worked well and what needs improvement?</label>
                    <textarea id="previousRetreats" name="previousRetreats" placeholder="Your feedback helps us make this retreat the best yet"></textarea>
                </div>
                <div class="form-group">
                    <label for="additionalComments">Any additional comments, concerns, or suggestions?</label>
                    <textarea id="additionalComments" name="additionalComments" placeholder="This is your opportunity to share anything else on your mind"></textarea>
                </div>
            </div>
            
            <button type="submit">Submit Assessment</button>
        </form>
    </div>
    
    <script>
        const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbw7p_wW1knNlSEeOh8ezku25iFI2IPitkOH1k2lII6YieLUvOMTdtsOA0xrvOB-K_R5wQ/exec';
        const form = document.getElementById('assessmentForm');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const boardWarning = document.getElementById('boardWarning');
        const councilBoardSelect = document.getElementById('councilBoard');
        
        // Monitor board selection
        councilBoardSelect.addEventListener('change', function() {
            if (this.value) {
                boardWarning.style.display = 'none';
                this.classList.remove('error');
                console.log('Board selected:', this.value);
            }
        });
        
        // Show/hide financial details
        const financialRadios = document.querySelectorAll('input[name="financialChallenges"]');
        const financialDetailsSection = document.getElementById('financialDetailsSection');
        const financialStrugglesSection = document.getElementById('financialStrugglesSection');
        
        financialRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'yes') {
                    financialDetailsSection.style.display = 'block';
                    financialStrugglesSection.style.display = 'block';
                } else {
                    financialDetailsSection.style.display = 'none';
                    financialStrugglesSection.style.display = 'none';
                }
            });
        });
        
        // Show/hide academic details
        const academicRadios = document.querySelectorAll('input[name="academicChallenges"]');
        const academicDetailsSection = document.getElementById('academicDetailsSection');
        const academicStrugglesSection = document.getElementById('academicStrugglesSection');
        
        academicRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                if (this.value === 'yes') {
                    academicDetailsSection.style.display = 'block';
                    academicStrugglesSection.style.display = 'block';
                } else {
                    academicDetailsSection.style.display = 'none';
                    academicStrugglesSection.style.display = 'none';
                }
            });
        });
        
        // Form submission with validation
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // CRITICAL VALIDATION: Check if board is selected
            const boardValue = councilBoardSelect.value;
            console.log('=== FORM SUBMISSION ===');
            console.log('Board value on submit:', boardValue);
            
            if (!boardValue || boardValue === '') {
                console.error('BOARD NOT SELECTED!');
                boardWarning.style.display = 'block';
                councilBoardSelect.classList.add('error');
                councilBoardSelect.focus();
                window.scrollTo({
                    top: councilBoardSelect.offsetTop - 100,
                    behavior: 'smooth'
                });
                alert('‚ö†Ô∏è PLEASE SELECT YOUR BOARD! This is a required field.');
                return;
            }
            
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            boardWarning.style.display = 'none';
            
            const formData = new FormData(form);
            const data = {};
            
            // Collect all form data including checkboxes
            for (let [key, value] of formData.entries()) {
                if (data[key]) {
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                } else {
                    data[key] = value;
                }
            }
            
            // Join arrays with commas
            for (let key in data) {
                if (Array.isArray(data[key])) {
                    data[key] = data[key].join(', ');
                }
            }

            // Add timestamp
            data.timestamp = new Date().toISOString();
            
            // FINAL CHECK
            console.log('Final data being sent:');
            console.log('councilBoard:', data.councilBoard);
            console.log('councilPosition:', data.councilPosition);
            console.log('Full data:', JSON.stringify(data, null, 2));
            
            if (!data.councilBoard || data.councilBoard === '') {
                alert('ERROR: Board not captured! Please try again.');
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Assessment';
                return;
            }
            
            try {
                const response = await fetch(APPS_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                console.log('Form submitted successfully!');
                successMessage.style.display = 'block';
                window.scrollTo(0, 0);
                
                // Reset form after delay
                setTimeout(() => {
                    form.reset();
                    financialDetailsSection.style.display = 'none';
                    financialStrugglesSection.style.display = 'none';
                    academicDetailsSection.style.display = 'none';
                    academicStrugglesSection.style.display = 'none';
                }, 2000);
                
            } catch (error) {
                console.error('Submission Error:', error);
                errorText.textContent = error.message;
                errorMessage.style.display = 'block';
                window.scrollTo(0, 0);
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Assessment';
            }
        });
    </script>
</body>
</html>
